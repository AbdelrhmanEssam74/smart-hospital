<section class="doctors-hero"
         style="background-image: url('/assets/images/auth-image.jpeg');
                background-size: cover; background-position: center;
                height: 60vh; display: flex; align-items: center; justify-content: center;">
  <div class="hero-content">
    <div>
      <small>Register</small>
      <h1>Register Now</h1>
    </div>
    <nav class="breadcrumb">
      <a href="#">Home &raquo; </a> Register
    </nav>
  </div>
</section>

<div class="container my-5">
  <div class="row align-items-center">
    <div class="col-md-6">
      <div class="auth-form">
        <h2>Register an Account</h2>

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          @if (errorMessage) {
            <div class="alert alert-danger">{{ errorMessage }}</div>
          }

          <!-- First Name -->
          <div class="form-group">
            <label>First Name</label>
            <input type="text" formControlName="firstName"
                   [class.is-invalid]="f['firstName'].invalid && (f['firstName'].touched || f['firstName'].dirty)"
                   placeholder="Enter your first name">
            @if (f['firstName'].invalid && (f['firstName'].touched || f['firstName'].dirty)) {
              <div class="invalid-feedback">
                @if (f['firstName'].errors?.['required']) {
                  <div>First name is required</div>
                }
                @if (f['firstName'].errors?.['minlength']) {
                  <div>Minimum length is 2 characters</div>
                }
              </div>
            }
          </div>

          <!-- Last Name -->
          <div class="form-group">
            <label>Last Name</label>
            <input type="text" formControlName="lastName"
                   [class.is-invalid]="f['lastName'].invalid && (f['lastName'].touched || f['lastName'].dirty)"
                   placeholder="Enter your last name">
            @if (f['lastName'].invalid && (f['lastName'].touched || f['lastName'].dirty)) {
              <div class="invalid-feedback">
                @if (f['lastName'].errors?.['required']) {
                  <div>Last name is required</div>
                }
                @if (f['lastName'].errors?.['minlength']) {
                  <div>Minimum length is 2 characters</div>
                }
              </div>
            }
          </div>

          <!-- Email -->
          <div class="form-group">
            <label>Email Address</label>
            <input type="email" formControlName="email"
                   [class.is-invalid]="f['email'].invalid && (f['email'].touched || f['email'].dirty)"
                   placeholder="Enter your email">
            @if (f['email'].invalid && (f['email'].touched || f['email'].dirty)) {
              <div class="invalid-feedback">
                @if (f['email'].errors?.['required']) {
                  <div>Email is required</div>
                }
                @if (f['email'].errors?.['email']) {
                  <div>Please enter a valid email</div>
                }
              </div>
            }
          </div>

          <!-- Password -->
          <div class="form-group">
            <label>Password</label>
            <input type="password" formControlName="password"
                   [class.is-invalid]="f['password'].invalid && (f['password'].touched || f['password'].dirty)"
                   placeholder="Enter your password">
            @if (f['password'].invalid && (f['password'].touched || f['password'].dirty)) {
              <div class="invalid-feedback">
                @if (f['password'].errors?.['required']) {
                  <div>Password is required</div>
                }
                @if (f['password'].errors?.['minlength']) {
                  <div>Minimum length is 6 characters</div>
                }
              </div>
            }
          </div>

          <!-- Confirm Password -->
          <div class="form-group">
            <label>Confirm Password</label>
            <input type="password" formControlName="confirmPassword"
                   [class.is-invalid]="(f['confirmPassword'].invalid || registerForm.errors?.['mismatch']) && (f['confirmPassword'].touched || f['confirmPassword'].dirty)"
                   placeholder="Confirm your password">
            @if (registerForm.errors?.['mismatch'] && (f['confirmPassword'].touched || f['confirmPassword'].dirty)) {
              <div class="invalid-feedback">Passwords do not match</div>
            }
            @if (f['confirmPassword'].errors?.['required'] && (f['confirmPassword'].touched || f['confirmPassword'].dirty)) {
              <div class="invalid-feedback">Confirm password is required</div>
            }
          </div>

          <!-- Phone -->
          <div class="form-group">
            <label>Phone</label>
            <input type="tel" formControlName="phone"
                   [class.is-invalid]="f['phone'].invalid && (f['phone'].touched || f['phone'].dirty)"
                   placeholder="Enter your phone number">
            @if (f['phone'].invalid && (f['phone'].touched || f['phone'].dirty)) {
              <div class="invalid-feedback">
                @if (f['phone'].errors?.['required']) {
                  <div>Phone is required</div>
                }
                @if (f['phone'].errors?.['pattern']) {
                  <div>Please enter a valid phone number (10-15 digits)</div>
                }
              </div>
            }
          </div>

          <!-- Role -->
          <div class="form-group">
            <label>Role</label>
            <select class="form-control p-3" formControlName="role"
                    [class.is-invalid]="f['role'].invalid && (f['role'].touched || f['role'].dirty)">
              <option value="" disabled selected>Select a role</option>
              <option value="user">User</option>
               <option value="admin">Admin</option>
              <option value="doctor">Doctor</option>
              <option value="patient">Patient</option>
            </select>
            @if (f['role'].invalid && (f['role'].touched || f['role'].dirty)) {
              <div class="invalid-feedback">
                @if (f['role'].errors?.['required']) {
                  <div>Role is required</div>
                }
              </div>
            }
          </div>

          <button type="submit" class="btn btn-primary w-100 py-3 mt-3 fw-bold">Register</button>

        </form>

        <div class="auth-footer mt-3 text-center">
          <p>Already have an account? <a routerLink="/login">Login here</a></p>
        </div>
      </div>
    </div>
    <div class="col-md-6 text-center">
      <img src="/assets/images/thank.jpeg" class="img-fluid" alt="Form Image">
    </div>
  </div>
</div>
